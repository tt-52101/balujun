<nz-card [nzBordered]="false">
  <div class="mb-md">
    <nz-row nzGutter="16">
      <form nz-form class="mb-md" [nzLayout]="'inline'" [nzNoColon]="true" style="display: flex;align-items: center;">

        <nz-form-item class="formitem">
          <nz-form-label nzFor="activityNo">{{l('PayMethod')}}</nz-form-label>
          <nz-form-control>
            <nz-select [(ngModel)]="queryData[0].value" nzAllowClear style="width: 200px" name="boat">
              <nz-option *ngFor="let item of payMethodList;let i = index;" [nzValue]="item.id" [nzLabel]="item.payName"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        

        <nz-form-item class="formitem">
          <nz-form-label>{{l('Date')}}</nz-form-label>
          <nz-form-control>
            <nz-range-picker style="width: 230px" nzFormat="yyyy-MM-dd" (ngModelChange)="datechange($event)" name="collectionTime" [nzDisabledDate]="disabledDate"
            [(ngModel)]="collectionTime"></nz-range-picker>
          </nz-form-control>
        </nz-form-item>

        
        <nz-form-item class="formitem" style="margin:0 8px 0 10px;">
          <button nz-button [nzType]="'primary'" (click)="refresh()" style="padding: 0px 20px;height: 32px;">{{l("Query")}}</button>
        </nz-form-item>
      </form>
    </nz-row>
  </div>
  <nz-row class="my-md">
    <nz-table #ajaxTable [nzData]="datalist" [nzNoResult]="noDataTemplate" nzBordered 
    [(nzPageIndex)]="pageNumber" [(nzPageSize)]="pageSize"  (nzPageIndexChange)="pageNumberChange()" (nzPageSizeChange)="refresh()" [nzShowSizeChanger]="true" [nzShowQuickJumper]="true" [nzNoResult]="noDataTemplate" [nzPageSizeOptions]="pageSizes" [nzTotal]="totalItems" [nzFrontPagination]="false" >
      <ng-template #noDataTemplate>
        <no-data></no-data>
      </ng-template>
      <thead (nzSortChange)="gridSort($event)">
        <tr>
          <th rowspan="2" nz-th class="text-center" nzLeft="0px"><span>支付方式</span></th>
          <th class="text-center"><span>购票数</span></th>
          <th class="text-center"><span>退票数</span></th>
          <th class="text-center"><span>数量小计</span></th>
          <th class="text-center"><span>购票金额</span></th>
          <th class="text-center"><span>退票金额</span></th>
          <th class="text-center"><span>金额小计</span></th>
          <th class="text-center">
            <span>详情</span>
          </th>
        </tr>
      </thead>
      <!-- 表格内容 -->
      <tbody>
        <tr *ngFor="let item of ajaxTable.data">
          <td nz-td class="text-center">

            <span *ngIf="item.aa">
              {{item.aa}}
            </span>
            <span *ngIf="!item.aa">
              合计
            </span>

          </td>
          <td nz-td class="text-center">
            <span>
              {{item.bb}}
            </span>
          </td>
          <td nz-td class="text-center" [ngStyle]="{'color':item.refundCount > 0? 'red':'rgba(0,0,0,0.65)'}">
            <span>
              {{item.cc}}
            </span>
          </td>
          <td nz-td class="text-center">
            <span>
              {{item.dd}}
            </span>
          </td>
          <td nz-td class="text-center">
            <span>
              ￥{{item.ee}}
            </span>
          </td>
          <td nz-td class="text-center" [ngStyle]="{'color':item.refundAmount > 0? 'red':'rgba(0,0,0,0.65)'}">
            <span>
              ￥{{item.ff}}
            </span>
          </td>
          <td nz-td class="text-center">
            <span>
              ￥{{item.gg}}
            </span>
          </td>
          <td class="text-center">
            <ng-container>
              <a (click)="open(1)">
                <span>详情</span> </a>
              </ng-container>
            </td>

          </tr>


          <tr *ngFor="let item of total">
            <td nz-td class="text-center">

              <span *ngIf="!item.payMethod">
                合计
              </span>

            </td>
            <td nz-td class="text-center">
              <span>
                {{item.saleCount}}
              </span>
            </td>
            <td nz-td class="text-center" [ngStyle]="{'color':item.refundCount > 0? 'red':'rgba(0,0,0,0.65)'}">
              <span>
                {{item.refundCount}}
              </span>
            </td>
            <td nz-td class="text-center">
              <span>
                {{item.totalCount}}
              </span>
            </td>
            <td nz-td class="text-center">
              <span>
                ￥{{item.saleAmount}}
              </span>
            </td>
            <td nz-td class="text-center" [ngStyle]="{'color':item.refundAmount > 0? 'red':'rgba(0,0,0,0.65)'}">
              <span>
                ￥{{item.refundAmount}}
              </span>
            </td>
            <td nz-td class="text-center">
              <span>
                ￥{{item.totalAmount}}
              </span>
            </td>
            <td class="text-center">
              <ng-container>

                <a (click)="open(1)">
                  <span>详情</span> </a>
                </ng-container>
              </td>

            </tr>
          </tbody>
        </nz-table>
      </nz-row>
    </nz-card>


